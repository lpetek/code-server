{"version":3,"sources":["out-vscode/vs/workbench/contrib/webview/browser/pre/main.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// @ts-check\n\n/// <reference lib=\"dom\" />\n\n\nconst isSafari = navigator.vendor && navigator.vendor.indexOf('Apple') > -1 &&\n\tnavigator.userAgent &&\n\tnavigator.userAgent.indexOf('CriOS') === -1 &&\n\tnavigator.userAgent.indexOf('FxiOS') === -1;\n\nconst isFirefox = (\n\tnavigator.userAgent &&\n\tnavigator.userAgent.indexOf('Firefox') >= 0\n);\n\nconst searchParams = new URL(location.toString()).searchParams;\nconst ID = searchParams.get('id');\nconst onElectron = searchParams.get('platform') === 'electron';\nconst expectedWorkerVersion = parseInt(searchParams.get('swVersion'));\nconst parentOrigin = searchParams.get('parentOrigin');\n\n/**\n * Use polling to track focus of main webview and iframes within the webview\n *\n * @param {Object} handlers\n * @param {() => void} handlers.onFocus\n * @param {() => void} handlers.onBlur\n */\nconst trackFocus = ({ onFocus, onBlur }) => {\n\tconst interval = 50;\n\tlet isFocused = document.hasFocus();\n\tsetInterval(() => {\n\t\tconst isCurrentlyFocused = document.hasFocus();\n\t\tif (isCurrentlyFocused === isFocused) {\n\t\t\treturn;\n\t\t}\n\t\tisFocused = isCurrentlyFocused;\n\t\tif (isCurrentlyFocused) {\n\t\t\tonFocus();\n\t\t} else {\n\t\t\tonBlur();\n\t\t}\n\t}, interval);\n};\n\nconst getActiveFrame = () => {\n\treturn /** @type {HTMLIFrameElement} */ (document.getElementById('active-frame'));\n};\n\nconst getPendingFrame = () => {\n\treturn /** @type {HTMLIFrameElement} */ (document.getElementById('pending-frame'));\n};\n\n/**\n * @template T\n * @param {T | undefined | null} obj\n * @return {T}\n */\nfunction assertIsDefined(obj) {\n\tif (typeof obj === 'undefined' || obj === null) {\n\t\tthrow new Error('Found unexpected null');\n\t}\n\treturn obj;\n}\n\nconst vscodePostMessageFuncName = '__vscode_post_message__';\n\nconst defaultStyles = document.createElement('style');\ndefaultStyles.id = '_defaultStyles';\ndefaultStyles.textContent = `\n\thtml {\n\t\tscrollbar-color: var(--vscode-scrollbarSlider-background) var(--vscode-editor-background);\n\t}\n\n\tbody {\n\t\tbackground-color: transparent;\n\t\tcolor: var(--vscode-editor-foreground);\n\t\tfont-family: var(--vscode-font-family);\n\t\tfont-weight: var(--vscode-font-weight);\n\t\tfont-size: var(--vscode-font-size);\n\t\tmargin: 0;\n\t\tpadding: 0 20px;\n\t}\n\n\timg {\n\t\tmax-width: 100%;\n\t\tmax-height: 100%;\n\t}\n\n\ta {\n\t\tcolor: var(--vscode-textLink-foreground);\n\t}\n\n\ta:hover {\n\t\tcolor: var(--vscode-textLink-activeForeground);\n\t}\n\n\ta:focus,\n\tinput:focus,\n\tselect:focus,\n\ttextarea:focus {\n\t\toutline: 1px solid -webkit-focus-ring-color;\n\t\toutline-offset: -1px;\n\t}\n\n\tcode {\n\t\tcolor: var(--vscode-textPreformat-foreground);\n\t}\n\n\tblockquote {\n\t\tbackground: var(--vscode-textBlockQuote-background);\n\t\tborder-color: var(--vscode-textBlockQuote-border);\n\t}\n\n\tkbd {\n\t\tcolor: var(--vscode-editor-foreground);\n\t\tborder-radius: 3px;\n\t\tvertical-align: middle;\n\t\tpadding: 1px 3px;\n\n\t\tbackground-color: hsla(0,0%,50%,.17);\n\t\tborder: 1px solid rgba(71,71,71,.4);\n\t\tborder-bottom-color: rgba(88,88,88,.4);\n\t\tbox-shadow: inset 0 -1px 0 rgba(88,88,88,.4);\n\t}\n\t.vscode-light kbd {\n\t\tbackground-color: hsla(0,0%,87%,.5);\n\t\tborder: 1px solid hsla(0,0%,80%,.7);\n\t\tborder-bottom-color: hsla(0,0%,73%,.7);\n\t\tbox-shadow: inset 0 -1px 0 hsla(0,0%,73%,.7);\n\t}\n\n\t::-webkit-scrollbar {\n\t\twidth: 10px;\n\t\theight: 10px;\n\t}\n\n\t::-webkit-scrollbar-corner {\n\t\tbackground-color: var(--vscode-editor-background);\n\t}\n\n\t::-webkit-scrollbar-thumb {\n\t\tbackground-color: var(--vscode-scrollbarSlider-background);\n\t}\n\t::-webkit-scrollbar-thumb:hover {\n\t\tbackground-color: var(--vscode-scrollbarSlider-hoverBackground);\n\t}\n\t::-webkit-scrollbar-thumb:active {\n\t\tbackground-color: var(--vscode-scrollbarSlider-activeBackground);\n\t}`;\n\n/**\n * @param {boolean} allowMultipleAPIAcquire\n * @param {*} [state]\n * @return {string}\n */\nfunction getVsCodeApiScript(allowMultipleAPIAcquire, state) {\n\tconst encodedState = state ? encodeURIComponent(state) : undefined;\n\treturn /* js */`\n\t\t\tglobalThis.acquireVsCodeApi = (function() {\n\t\t\t\tconst originalPostMessage = window.parent['${vscodePostMessageFuncName}'].bind(window.parent);\n\t\t\t\tconst doPostMessage = (channel, data, transfer) => {\n\t\t\t\t\toriginalPostMessage(channel, data, transfer);\n\t\t\t\t};\n\n\t\t\t\tlet acquired = false;\n\n\t\t\t\tlet state = ${state ? `JSON.parse(decodeURIComponent(\"${encodedState}\"))` : undefined};\n\n\t\t\t\treturn () => {\n\t\t\t\t\tif (acquired && !${allowMultipleAPIAcquire}) {\n\t\t\t\t\t\tthrow new Error('An instance of the VS Code API has already been acquired');\n\t\t\t\t\t}\n\t\t\t\t\tacquired = true;\n\t\t\t\t\treturn Object.freeze({\n\t\t\t\t\t\tpostMessage: function(message, transfer) {\n\t\t\t\t\t\t\tdoPostMessage('onmessage', { message, transfer }, transfer);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsetState: function(newState) {\n\t\t\t\t\t\t\tstate = newState;\n\t\t\t\t\t\t\tdoPostMessage('do-update-state', JSON.stringify(newState));\n\t\t\t\t\t\t\treturn newState;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetState: function() {\n\t\t\t\t\t\t\treturn state;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t})();\n\t\t\tdelete window.parent;\n\t\t\tdelete window.top;\n\t\t\tdelete window.frameElement;\n\t\t`;\n}\n\n/** @type {Promise<void>} */\nconst workerReady = new Promise(async (resolve, reject) => {\n\tif (!areServiceWorkersEnabled()) {\n\t\treturn reject(new Error('Service Workers are not enabled. Webviews will not work. Try disabling private/incognito mode.'));\n\t}\n\n\tconst swPath = `service-worker.js${self.location.search}`;\n\n\tnavigator.serviceWorker.register(swPath).then(\n\t\tasync registration => {\n\t\t\tawait navigator.serviceWorker.ready;\n\n\t\t\t/**\n\t\t\t * @param {MessageEvent} event\n\t\t\t */\n\t\t\tconst versionHandler = async (event) => {\n\t\t\t\tif (event.data.channel !== 'version') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tnavigator.serviceWorker.removeEventListener('message', versionHandler);\n\t\t\t\tif (event.data.version === expectedWorkerVersion) {\n\t\t\t\t\treturn resolve();\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log(`Found unexpected service worker version. Found: ${event.data.version}. Expected: ${expectedWorkerVersion}`);\n\t\t\t\t\tconsole.log(`Attempting to reload service worker`);\n\n\t\t\t\t\t// If we have the wrong version, try once (and only once) to unregister and re-register\n\t\t\t\t\t// Note that `.update` doesn't seem to work desktop electron at the moment so we use\n\t\t\t\t\t// `unregister` and `register` here.\n\t\t\t\t\treturn registration.unregister()\n\t\t\t\t\t\t.then(() => navigator.serviceWorker.register(swPath))\n\t\t\t\t\t\t.then(() => navigator.serviceWorker.ready)\n\t\t\t\t\t\t.finally(() => { resolve(); });\n\t\t\t\t}\n\t\t\t};\n\t\t\tnavigator.serviceWorker.addEventListener('message', versionHandler);\n\n\t\t\tconst postVersionMessage = () => {\n\t\t\t\tassertIsDefined(navigator.serviceWorker.controller).postMessage({ channel: 'version' });\n\t\t\t};\n\n\t\t\t// At this point, either the service worker is ready and\n\t\t\t// became our controller, or we need to wait for it.\n\t\t\t// Note that navigator.serviceWorker.controller could be a\n\t\t\t// controller from a previously loaded service worker.\n\t\t\tconst currentController = navigator.serviceWorker.controller;\n\t\t\tif (currentController && currentController.scriptURL.endsWith(swPath)) {\n\t\t\t\t// service worker already loaded & ready to receive messages\n\t\t\t\tpostVersionMessage();\n\t\t\t} else {\n\t\t\t\t// either there's no controlling service worker, or it's an old one:\n\t\t\t\t// wait for it to change before posting the message\n\t\t\t\tconst onControllerChange = () => {\n\t\t\t\t\tnavigator.serviceWorker.removeEventListener('controllerchange', onControllerChange);\n\t\t\t\t\tpostVersionMessage();\n\t\t\t\t};\n\t\t\t\tnavigator.serviceWorker.addEventListener('controllerchange', onControllerChange);\n\t\t\t}\n\t\t},\n\t\terror => {\n\t\t\treject(new Error(`Could not register service workers: ${error}.`));\n\t\t});\n});\n\nconst hostMessaging = new class HostMessaging {\n\tconstructor() {\n\t\t/** @type {Map<string, Array<(event: MessageEvent, data: any) => void>>} */\n\t\tthis.handlers = new Map();\n\n\t\twindow.addEventListener('message', (e) => {\n\t\t\tif (e.origin !== parentOrigin) {\n\t\t\t\tconsole.log(`skipping webview message due to mismatched origins: ${e.origin} ${parentOrigin}`);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst channel = e.data.channel;\n\t\t\tconst handlers = this.handlers.get(channel);\n\t\t\tif (handlers) {\n\t\t\t\tfor (const handler of handlers) {\n\t\t\t\t\thandler(e, e.data.args);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.log('no handler for ', e);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * @param {string} channel\n\t * @param {any} data\n\t */\n\tpostMessage(channel, data) {\n\t\twindow.parent.postMessage({ target: ID, channel, data }, parentOrigin);\n\t}\n\n\t/**\n\t * @param {string} channel\n\t * @param {(event: MessageEvent, data: any) => void} handler\n\t */\n\tonMessage(channel, handler) {\n\t\tlet handlers = this.handlers.get(channel);\n\t\tif (!handlers) {\n\t\t\thandlers = [];\n\t\t\tthis.handlers.set(channel, handlers);\n\t\t}\n\t\thandlers.push(handler);\n\t}\n}();\n\nconst unloadMonitor = new class {\n\n\tconstructor() {\n\t\tthis.confirmBeforeClose = 'keyboardOnly';\n\t\tthis.isModifierKeyDown = false;\n\n\t\thostMessaging.onMessage('set-confirm-before-close', (_e, /** @type {string} */ data) => {\n\t\t\tthis.confirmBeforeClose = data;\n\t\t});\n\n\t\thostMessaging.onMessage('content', (_e, /** @type {any} */ data) => {\n\t\t\tthis.confirmBeforeClose = data.confirmBeforeClose;\n\t\t});\n\n\t\twindow.addEventListener('beforeunload', (event) => {\n\t\t\tif (onElectron) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tswitch (this.confirmBeforeClose) {\n\t\t\t\tcase 'always':\n\t\t\t\t\t{\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tevent.returnValue = '';\n\t\t\t\t\t\treturn '';\n\t\t\t\t\t}\n\t\t\t\tcase 'never':\n\t\t\t\t\t{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\tcase 'keyboardOnly':\n\t\t\t\tdefault: {\n\t\t\t\t\tif (this.isModifierKeyDown) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tevent.returnValue = '';\n\t\t\t\t\t\treturn '';\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tonIframeLoaded(/** @type {HTMLIFrameElement} */frame) {\n\t\tframe.contentWindow.addEventListener('keydown', e => {\n\t\t\tthis.isModifierKeyDown = e.metaKey || e.ctrlKey || e.altKey;\n\t\t});\n\n\t\tframe.contentWindow.addEventListener('keyup', () => {\n\t\t\tthis.isModifierKeyDown = false;\n\t\t});\n\t}\n};\n\n// state\nlet firstLoad = true;\n/** @type {any} */\nlet loadTimeout;\nlet styleVersion = 0;\n\n/** @type {Array<{ readonly message: any, transfer?: ArrayBuffer[] }>} */\nlet pendingMessages = [];\n\nconst initData = {\n\t/** @type {number | undefined} */\n\tinitialScrollProgress: undefined,\n\n\t/** @type {{ [key: string]: string } | undefined} */\n\tstyles: undefined,\n\n\t/** @type {string | undefined} */\n\tactiveTheme: undefined,\n\n\t/** @type {string | undefined} */\n\tthemeName: undefined,\n};\n\nhostMessaging.onMessage('did-load-resource', (_event, data) => {\n\tnavigator.serviceWorker.ready.then(registration => {\n\t\tassertIsDefined(registration.active).postMessage({ channel: 'did-load-resource', data }, data.data?.buffer ? [data.data.buffer] : []);\n\t});\n});\n\nhostMessaging.onMessage('did-load-localhost', (_event, data) => {\n\tnavigator.serviceWorker.ready.then(registration => {\n\t\tassertIsDefined(registration.active).postMessage({ channel: 'did-load-localhost', data });\n\t});\n});\n\nnavigator.serviceWorker.addEventListener('message', event => {\n\tswitch (event.data.channel) {\n\t\tcase 'load-resource':\n\t\tcase 'load-localhost':\n\t\t\thostMessaging.postMessage(event.data.channel, event.data);\n\t\t\treturn;\n\t}\n});\n/**\n * @param {HTMLDocument?} document\n * @param {HTMLElement?} body\n */\nconst applyStyles = (document, body) => {\n\tif (!document) {\n\t\treturn;\n\t}\n\n\tif (body) {\n\t\tbody.classList.remove('vscode-light', 'vscode-dark', 'vscode-high-contrast');\n\t\tif (initData.activeTheme) {\n\t\t\tbody.classList.add(initData.activeTheme);\n\t\t}\n\n\t\tbody.dataset.vscodeThemeKind = initData.activeTheme;\n\t\tbody.dataset.vscodeThemeName = initData.themeName || '';\n\t}\n\n\tif (initData.styles) {\n\t\tconst documentStyle = document.documentElement.style;\n\n\t\t// Remove stale properties\n\t\tfor (let i = documentStyle.length - 1; i >= 0; i--) {\n\t\t\tconst property = documentStyle[i];\n\n\t\t\t// Don't remove properties that the webview might have added separately\n\t\t\tif (property && property.startsWith('--vscode-')) {\n\t\t\t\tdocumentStyle.removeProperty(property);\n\t\t\t}\n\t\t}\n\n\t\t// Re-add new properties\n\t\tfor (const variable of Object.keys(initData.styles)) {\n\t\t\tdocumentStyle.setProperty(`--${variable}`, initData.styles[variable]);\n\t\t}\n\t}\n};\n\n/**\n * @param {MouseEvent} event\n */\nconst handleInnerClick = (event) => {\n\tif (!event || !event.view || !event.view.document) {\n\t\treturn;\n\t}\n\n\tconst baseElement = event.view.document.getElementsByTagName('base')[0];\n\n\tfor (const pathElement of event.composedPath()) {\n\t\t/** @type {any} */\n\t\tconst node = pathElement;\n\t\tif (node.tagName === 'A' && node.href) {\n\t\t\tif (node.getAttribute('href') === '#') {\n\t\t\t\tevent.view.scrollTo(0, 0);\n\t\t\t} else if (node.hash && (node.getAttribute('href') === node.hash || (baseElement && node.href === baseElement.href + node.hash))) {\n\t\t\t\tconst scrollTarget = event.view.document.getElementById(node.hash.substr(1, node.hash.length - 1));\n\t\t\t\tif (scrollTarget) {\n\t\t\t\t\tscrollTarget.scrollIntoView();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\thostMessaging.postMessage('did-click-link', node.href.baseVal || node.href);\n\t\t\t}\n\t\t\tevent.preventDefault();\n\t\t\treturn;\n\t\t}\n\t}\n};\n\n/**\n * @param {MouseEvent} event\n */\nconst handleAuxClick =\n\t(event) => {\n\t\t// Prevent middle clicks opening a broken link in the browser\n\t\tif (!event.view || !event.view.document) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.button === 1) {\n\t\t\tfor (const pathElement of event.composedPath()) {\n\t\t\t\t/** @type {any} */\n\t\t\t\tconst node = pathElement;\n\t\t\t\tif (node.tagName === 'A' && node.href) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n/**\n * @param {KeyboardEvent} e\n */\nconst handleInnerKeydown = (e) => {\n\t// If the keypress would trigger a browser event, such as copy or paste,\n\t// make sure we block the browser from dispatching it. Instead VS Code\n\t// handles these events and will dispatch a copy/paste back to the webview\n\t// if needed\n\tif (isUndoRedo(e) || isPrint(e)) {\n\t\te.preventDefault();\n\t} else if (isCopyPasteOrCut(e)) {\n\t\tif (onElectron) {\n\t\t\te.preventDefault();\n\t\t} else {\n\t\t\treturn; // let the browser handle this\n\t\t}\n\t}\n\n\thostMessaging.postMessage('did-keydown', {\n\t\tkey: e.key,\n\t\tkeyCode: e.keyCode,\n\t\tcode: e.code,\n\t\tshiftKey: e.shiftKey,\n\t\taltKey: e.altKey,\n\t\tctrlKey: e.ctrlKey,\n\t\tmetaKey: e.metaKey,\n\t\trepeat: e.repeat\n\t});\n};\n/**\n * @param {KeyboardEvent} e\n */\nconst handleInnerUp = (e) => {\n\thostMessaging.postMessage('did-keyup', {\n\t\tkey: e.key,\n\t\tkeyCode: e.keyCode,\n\t\tcode: e.code,\n\t\tshiftKey: e.shiftKey,\n\t\taltKey: e.altKey,\n\t\tctrlKey: e.ctrlKey,\n\t\tmetaKey: e.metaKey,\n\t\trepeat: e.repeat\n\t});\n};\n\n/**\n * @param {KeyboardEvent} e\n * @return {boolean}\n */\nfunction isCopyPasteOrCut(e) {\n\tconst hasMeta = e.ctrlKey || e.metaKey;\n\tconst shiftInsert = e.shiftKey && e.key.toLowerCase() === 'insert';\n\treturn (hasMeta && ['c', 'v', 'x'].includes(e.key.toLowerCase())) || shiftInsert;\n}\n\n/**\n * @param {KeyboardEvent} e\n * @return {boolean}\n */\nfunction isUndoRedo(e) {\n\tconst hasMeta = e.ctrlKey || e.metaKey;\n\treturn hasMeta && ['z', 'y'].includes(e.key.toLowerCase());\n}\n\n/**\n * @param {KeyboardEvent} e\n * @return {boolean}\n */\nfunction isPrint(e) {\n\tconst hasMeta = e.ctrlKey || e.metaKey;\n\treturn hasMeta && e.key.toLowerCase() === 'p';\n}\n\nlet isHandlingScroll = false;\n\n/**\n * @param {WheelEvent} event\n */\nconst handleWheel = (event) => {\n\tif (isHandlingScroll) {\n\t\treturn;\n\t}\n\n\thostMessaging.postMessage('did-scroll-wheel', {\n\t\tdeltaMode: event.deltaMode,\n\t\tdeltaX: event.deltaX,\n\t\tdeltaY: event.deltaY,\n\t\tdeltaZ: event.deltaZ,\n\t\tdetail: event.detail,\n\t\ttype: event.type\n\t});\n};\n\n/**\n * @param {Event} event\n */\nconst handleInnerScroll = (event) => {\n\tif (isHandlingScroll) {\n\t\treturn;\n\t}\n\n\tconst target = /** @type {HTMLDocument | null} */ (event.target);\n\tconst currentTarget = /** @type {Window | null} */ (event.currentTarget);\n\tif (!target || !currentTarget || !target.body) {\n\t\treturn;\n\t}\n\n\tconst progress = currentTarget.scrollY / target.body.clientHeight;\n\tif (isNaN(progress)) {\n\t\treturn;\n\t}\n\n\tisHandlingScroll = true;\n\twindow.requestAnimationFrame(() => {\n\t\ttry {\n\t\t\thostMessaging.postMessage('did-scroll', progress);\n\t\t} catch (e) {\n\t\t\t// noop\n\t\t}\n\t\tisHandlingScroll = false;\n\t});\n};\n\n/**\n * @param {() => void} callback\n */\nfunction onDomReady(callback) {\n\tif (document.readyState === 'interactive' || document.readyState === 'complete') {\n\t\tcallback();\n\t} else {\n\t\tdocument.addEventListener('DOMContentLoaded', callback);\n\t}\n}\n\nfunction areServiceWorkersEnabled() {\n\ttry {\n\t\treturn !!navigator.serviceWorker;\n\t} catch (e) {\n\t\treturn false;\n\t}\n}\n\n/**\n * @typedef {{\n *     contents: string;\n *     options: {\n *         readonly allowScripts: boolean;\n *         readonly allowMultipleAPIAcquire: boolean;\n *     }\n *     state: any;\n *     cspSource: string;\n * }} ContentUpdateData\n */\n\n/**\n * @param {ContentUpdateData} data\n * @return {string}\n */\nfunction toContentHtml(data) {\n\tconst options = data.options;\n\tconst text = data.contents;\n\tconst newDocument = new DOMParser().parseFromString(text, 'text/html');\n\n\tnewDocument.querySelectorAll('a').forEach(a => {\n\t\tif (!a.title) {\n\t\t\tconst href = a.getAttribute('href');\n\t\t\tif (typeof href === 'string') {\n\t\t\t\ta.title = href;\n\t\t\t}\n\t\t}\n\t});\n\n\t// Inject default script\n\tif (options.allowScripts) {\n\t\tconst defaultScript = newDocument.createElement('script');\n\t\tdefaultScript.id = '_vscodeApiScript';\n\t\tdefaultScript.textContent = getVsCodeApiScript(options.allowMultipleAPIAcquire, data.state);\n\t\tnewDocument.head.prepend(defaultScript);\n\t}\n\n\t// Inject default styles\n\tnewDocument.head.prepend(defaultStyles.cloneNode(true));\n\n\tapplyStyles(newDocument, newDocument.body);\n\n\t// Check for CSP\n\tconst csp = newDocument.querySelector('meta[http-equiv=\"Content-Security-Policy\"]');\n\tif (!csp) {\n\t\thostMessaging.postMessage('no-csp-found');\n\t} else {\n\t\ttry {\n\t\t\t// Attempt to rewrite CSPs that hardcode old-style resource endpoint\n\t\t\tconst cspContent = csp.getAttribute('content');\n\t\t\tif (cspContent) {\n\t\t\t\tconst newCsp = cspContent.replace(/(vscode-webview-resource|vscode-resource):(?=(\\s|;|$))/g, data.cspSource);\n\t\t\t\tcsp.setAttribute('content', newCsp);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(`Could not rewrite csp: ${e}`);\n\t\t}\n\t}\n\n\t// set DOCTYPE for newDocument explicitly as DOMParser.parseFromString strips it off\n\t// and DOCTYPE is needed in the iframe to ensure that the user agent stylesheet is correctly overridden\n\treturn '<!DOCTYPE html>\\n' + newDocument.documentElement.outerHTML;\n}\n\nonDomReady(() => {\n\tif (!document.body) {\n\t\treturn;\n\t}\n\n\thostMessaging.onMessage('styles', (_event, data) => {\n\t\t++styleVersion;\n\n\t\tinitData.styles = data.styles;\n\t\tinitData.activeTheme = data.activeTheme;\n\t\tinitData.themeName = data.themeName;\n\n\t\tconst target = getActiveFrame();\n\t\tif (!target) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (target.contentDocument) {\n\t\t\tapplyStyles(target.contentDocument, target.contentDocument.body);\n\t\t}\n\t});\n\n\t// propagate focus\n\thostMessaging.onMessage('focus', () => {\n\t\tconst activeFrame = getActiveFrame();\n\t\tif (!activeFrame || !activeFrame.contentWindow) {\n\t\t\t// Focus the top level webview instead\n\t\t\twindow.focus();\n\t\t\treturn;\n\t\t}\n\n\t\tif (document.activeElement === activeFrame) {\n\t\t\t// We are already focused on the iframe (or one of its children) so no need\n\t\t\t// to refocus.\n\t\t\treturn;\n\t\t}\n\n\t\tactiveFrame.contentWindow.focus();\n\t});\n\n\t// update iframe-contents\n\tlet updateId = 0;\n\thostMessaging.onMessage('content', async (_event, /** @type {ContentUpdateData} */ data) => {\n\t\tconst currentUpdateId = ++updateId;\n\n\t\ttry {\n\t\t\tawait workerReady;\n\t\t} catch (e) {\n\t\t\tconsole.error(`Webview fatal error: ${e}`);\n\t\t\thostMessaging.postMessage('fatal-error', { message: e + '' });\n\t\t\treturn;\n\t\t}\n\n\t\tif (currentUpdateId !== updateId) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst options = data.options;\n\t\tconst newDocument = toContentHtml(data);\n\n\t\tconst initialStyleVersion = styleVersion;\n\n\t\tconst frame = getActiveFrame();\n\t\tconst wasFirstLoad = firstLoad;\n\t\t// keep current scrollY around and use later\n\t\t/** @type {(body: HTMLElement, window: Window) => void} */\n\t\tlet setInitialScrollPosition;\n\t\tif (firstLoad) {\n\t\t\tfirstLoad = false;\n\t\t\tsetInitialScrollPosition = (body, window) => {\n\t\t\t\tif (typeof initData.initialScrollProgress === 'number' && !isNaN(initData.initialScrollProgress)) {\n\t\t\t\t\tif (window.scrollY === 0) {\n\t\t\t\t\t\twindow.scroll(0, body.clientHeight * initData.initialScrollProgress);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t} else {\n\t\t\tconst scrollY = frame && frame.contentDocument && frame.contentDocument.body ? assertIsDefined(frame.contentWindow).scrollY : 0;\n\t\t\tsetInitialScrollPosition = (body, window) => {\n\t\t\t\tif (window.scrollY === 0) {\n\t\t\t\t\twindow.scroll(0, scrollY);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\t// Clean up old pending frames and set current one as new one\n\t\tconst previousPendingFrame = getPendingFrame();\n\t\tif (previousPendingFrame) {\n\t\t\tpreviousPendingFrame.setAttribute('id', '');\n\t\t\tdocument.body.removeChild(previousPendingFrame);\n\t\t}\n\t\tif (!wasFirstLoad) {\n\t\t\tpendingMessages = [];\n\t\t}\n\n\t\tconst newFrame = document.createElement('iframe');\n\t\tnewFrame.setAttribute('id', 'pending-frame');\n\t\tnewFrame.setAttribute('frameborder', '0');\n\t\tnewFrame.setAttribute('sandbox', options.allowScripts ? 'allow-scripts allow-forms allow-same-origin allow-pointer-lock allow-downloads' : 'allow-same-origin allow-pointer-lock');\n\t\tif (!isFirefox) {\n\t\t\tnewFrame.setAttribute('allow', options.allowScripts ? 'clipboard-read; clipboard-write;' : '');\n\t\t}\n\t\t// We should just be able to use srcdoc, but I wasn't\n\t\t// seeing the service worker applying properly.\n\t\t// Fake load an empty on the correct origin and then write real html\n\t\t// into it to get around this.\n\t\tnewFrame.src = `./fake.html?id=${ID}`;\n\n\t\tnewFrame.style.cssText = 'display: block; margin: 0; overflow: hidden; position: absolute; width: 100%; height: 100%; visibility: hidden';\n\t\tdocument.body.appendChild(newFrame);\n\n\t\t/**\n\t\t * @param {Document} contentDocument\n\t\t */\n\t\tfunction onFrameLoaded(contentDocument) {\n\t\t\t// Workaround for https://bugs.chromium.org/p/chromium/issues/detail?id=978325\n\t\t\tsetTimeout(() => {\n\t\t\t\tcontentDocument.open();\n\t\t\t\tcontentDocument.write(newDocument);\n\t\t\t\tcontentDocument.close();\n\t\t\t\thookupOnLoadHandlers(newFrame);\n\n\t\t\t\tif (initialStyleVersion !== styleVersion) {\n\t\t\t\t\tapplyStyles(contentDocument, contentDocument.body);\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t}\n\n\t\tif (!options.allowScripts && isSafari) {\n\t\t\t// On Safari for iframes with scripts disabled, the `DOMContentLoaded` never seems to be fired.\n\t\t\t// Use polling instead.\n\t\t\tconst interval = setInterval(() => {\n\t\t\t\t// If the frame is no longer mounted, loading has stopped\n\t\t\t\tif (!newFrame.parentElement) {\n\t\t\t\t\tclearInterval(interval);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst contentDocument = assertIsDefined(newFrame.contentDocument);\n\t\t\t\tif (contentDocument.readyState !== 'loading') {\n\t\t\t\t\tclearInterval(interval);\n\t\t\t\t\tonFrameLoaded(contentDocument);\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t} else {\n\t\t\tassertIsDefined(newFrame.contentWindow).addEventListener('DOMContentLoaded', e => {\n\t\t\t\tconst contentDocument = e.target ? (/** @type {HTMLDocument} */ (e.target)) : undefined;\n\t\t\t\tonFrameLoaded(assertIsDefined(contentDocument));\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * @param {Document} contentDocument\n\t\t * @param {Window} contentWindow\n\t\t */\n\t\tconst onLoad = (contentDocument, contentWindow) => {\n\t\t\tif (contentDocument && contentDocument.body) {\n\t\t\t\t// Workaround for https://github.com/microsoft/vscode/issues/12865\n\t\t\t\t// check new scrollY and reset if necessary\n\t\t\t\tsetInitialScrollPosition(contentDocument.body, contentWindow);\n\t\t\t}\n\n\t\t\tconst newFrame = getPendingFrame();\n\t\t\tif (newFrame && newFrame.contentDocument && newFrame.contentDocument === contentDocument) {\n\t\t\t\tconst oldActiveFrame = getActiveFrame();\n\t\t\t\tif (oldActiveFrame) {\n\t\t\t\t\tdocument.body.removeChild(oldActiveFrame);\n\t\t\t\t}\n\t\t\t\t// Styles may have changed since we created the element. Make sure we re-style\n\t\t\t\tif (initialStyleVersion !== styleVersion) {\n\t\t\t\t\tapplyStyles(newFrame.contentDocument, newFrame.contentDocument.body);\n\t\t\t\t}\n\t\t\t\tnewFrame.setAttribute('id', 'active-frame');\n\t\t\t\tnewFrame.style.visibility = 'visible';\n\n\t\t\t\tcontentWindow.addEventListener('scroll', handleInnerScroll);\n\t\t\t\tcontentWindow.addEventListener('wheel', handleWheel);\n\n\t\t\t\tif (document.hasFocus()) {\n\t\t\t\t\tcontentWindow.focus();\n\t\t\t\t}\n\n\t\t\t\tpendingMessages.forEach((message) => {\n\t\t\t\t\tcontentWindow.postMessage(message.message, window.origin, message.transfer);\n\t\t\t\t});\n\t\t\t\tpendingMessages = [];\n\t\t\t}\n\n\t\t\thostMessaging.postMessage('did-load');\n\t\t};\n\n\t\t/**\n\t\t * @param {HTMLIFrameElement} newFrame\n\t\t */\n\t\tfunction hookupOnLoadHandlers(newFrame) {\n\t\t\tclearTimeout(loadTimeout);\n\t\t\tloadTimeout = undefined;\n\t\t\tloadTimeout = setTimeout(() => {\n\t\t\t\tclearTimeout(loadTimeout);\n\t\t\t\tloadTimeout = undefined;\n\t\t\t\tonLoad(assertIsDefined(newFrame.contentDocument), assertIsDefined(newFrame.contentWindow));\n\t\t\t}, 200);\n\n\t\t\tconst contentWindow = assertIsDefined(newFrame.contentWindow);\n\n\t\t\tcontentWindow.addEventListener('load', function (e) {\n\t\t\t\tconst contentDocument = /** @type {Document} */ (e.target);\n\n\t\t\t\tif (loadTimeout) {\n\t\t\t\t\tclearTimeout(loadTimeout);\n\t\t\t\t\tloadTimeout = undefined;\n\t\t\t\t\tonLoad(contentDocument, this);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Bubble out various events\n\t\t\tcontentWindow.addEventListener('click', handleInnerClick);\n\t\t\tcontentWindow.addEventListener('auxclick', handleAuxClick);\n\t\t\tcontentWindow.addEventListener('keydown', handleInnerKeydown);\n\t\t\tcontentWindow.addEventListener('keyup', handleInnerUp);\n\t\t\tcontentWindow.addEventListener('contextmenu', e => {\n\t\t\t\tif (e.defaultPrevented) {\n\t\t\t\t\t// Extension code has already handled this event\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\te.preventDefault();\n\t\t\t\thostMessaging.postMessage('did-context-menu', {\n\t\t\t\t\tclientX: e.clientX,\n\t\t\t\t\tclientY: e.clientY,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tunloadMonitor.onIframeLoaded(newFrame);\n\t\t}\n\n\t\thostMessaging.postMessage('did-set-content', undefined);\n\t});\n\n\t// Forward message to the embedded iframe\n\thostMessaging.onMessage('message', (_event, /** @type {{message: any, transfer?: ArrayBuffer[] }} */ data) => {\n\t\tconst pending = getPendingFrame();\n\t\tif (!pending) {\n\t\t\tconst target = getActiveFrame();\n\t\t\tif (target) {\n\t\t\t\tassertIsDefined(target.contentWindow).postMessage(data.message, window.origin, data.transfer);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tpendingMessages.push(data);\n\t});\n\n\thostMessaging.onMessage('initial-scroll-position', (_event, progress) => {\n\t\tinitData.initialScrollProgress = progress;\n\t});\n\n\thostMessaging.onMessage('execCommand', (_event, data) => {\n\t\tconst target = getActiveFrame();\n\t\tif (!target) {\n\t\t\treturn;\n\t\t}\n\t\tassertIsDefined(target.contentDocument).execCommand(data);\n\t});\n\n\ttrackFocus({\n\t\tonFocus: () => hostMessaging.postMessage('did-focus'),\n\t\tonBlur: () => hostMessaging.postMessage('did-blur')\n\t});\n\n\t(/** @type {any} */ (window))[vscodePostMessageFuncName] = (/** @type {string} */ command, /** @type {any} */ data) => {\n\t\tswitch (command) {\n\t\t\tcase 'onmessage':\n\t\t\tcase 'do-update-state':\n\t\t\t\thostMessaging.postMessage(command, data);\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\t// signal ready\n\thostMessaging.postMessage('webview-ready', {});\n});\n"],"mappings":"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","names":[],"file":"main.js"}